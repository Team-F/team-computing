/*-------------------------------------------------------------------------------------------------------------
Program Description:		Counts the number of lines it passes and displays them on screen
Author:				Seamus de Cleir and Dylan Crosbie
Date:				19/02/2015
-------------------------------------------------------------------------------------------------------------*/
#pragma config(Sensor, S1,     touchSensor,    sensorTouch)
#pragma config(Sensor, S2,     soundSensor,    sensorSoundDB)
#pragma config(Sensor, S3,     lightSensor,    sensorLightActive)
#pragma config(Sensor, S4,     sonarSensor,    sensorSONAR)
#pragma config(Motor,  motorB,          rightMotor,    tmotorNXT, PIDControl, encoder)
#pragma config(Motor,  motorC,          leftMotor,     tmotorNXT, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard              !!*//

#include "functions.h"
task main()
{

	int countValue = 0;		//Keeps counts of lines
	int lastSeen;			//Makes sure only one line is counted over a large black square

	nxtDisplayCenteredBigTextLine(3, "%d" ,countValue );		//Displays the Count Value
	ClearTimer(T1);
	lastSeen= 1;

	while(1==1){
		motor[leftMotor]=50;
		motor[rightMotor]=50;
		
		if(SensorValue(lightSensor) < 50){
					
			if (lastSeen == 1){
				PlayTone(695, 14);
				countValue=countValue+ 1;
				lastSeen= 0;
				nxtDisplayCenteredBigTextLine(3, "%d" ,countValue );
			}//End of if
		}else{
			lastSeen= 1;
		}//End of if
	}//End of while


}//End of main
