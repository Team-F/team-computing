/*-------------------------------------------------------------------------------------------------------------
Program Description:	Follow the line and use the ultrasonic sensor to detect an object, then go around it 
                        in an arch and find the line again.
Author:			Seamus de Cleir and Dylan Crosbie
Date:			19/02/2015
-------------------------------------------------------------------------------------------------------------*/
#pragma config(Sensor, S3,     lightSensor,    sensorLightActive)
#pragma config(Sensor, S4,     sonarSensor,    sensorSONAR)
#pragma config(Motor,  motorC,          leftMotor,     tmotorNXT, PIDControl, encoder)
#pragma config(Motor,  motorB,          rightMotor,    tmotorNXT, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "functions.h"
task main()
{


	while(1==1){

		while (SensorValue(sonarSensor) < 10) //Robot moves forward following a line until it dectects an object within 10cm
			{

				leftTurn();                   //Moves around object
				motorControl(50,34, 2000);

			}//End of while

		lineTrack(50);                  //Tracks line


	}
}
